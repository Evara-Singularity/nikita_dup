<div id="oosSimilarTopSection"
    *ngIf="productOutOfStock && productService.oosSimilarProductsData.similarData.length > 0">
    <product-horizontal-card [product]="productService.oosSimilarProductsData.similarData[0]">
    </product-horizontal-card>
    <product-horizontal-card [product]="productService.oosSimilarProductsData.similarData[1]">
    </product-horizontal-card>
</div>
<div class="pdp-container display-block" [ngClass]="{'pdp-container-remove': productOutOfStock}"
    *ngIf="!productNotFound">

    <div class="prod-carsl" addClass [class.hasOneImage]="productAllImages?.length === 1"
        [ngClass]="[carouselInitialized ? '' : 'before-init']">
        <div class="fixed-strip">
            <span class="fixed_ico" (click)="loadProductShare()"><i class="icon-product_share"></i></span>
            <span class="fixed_ico wishlist" [class.active]="isPurcahseListProduct" (click)="addToPurchaseList()">
                <i [ngClass]="isPurcahseListProduct ? 'icon-wishlist1-active' : 'icon-wishlist1-inactive'"></i>
            </span>
            <span *ngIf="productOutOfStock"
                (click)="scrollToId(!productOutOfStock ? 'similarProducts' : 'similarProductsOos')"
                class="fixed_ico fixed_ico-img"><img src="{{imagePathAsset}}assets/img/similar-ico.svg"></span>
        </div>
        <ng-container #productCrousel></ng-container>
        <div class="prod-carsl-pseudo" (click)="openPopUpcrousel(0)" swipe (next)="onRotateNext()" #productCrouselPseudo
            (previous)="onRotatePrevious()">
            <div class="img-block-pseudo">
                <div class="inner-block-pseudo">
                    <div class="pinch-zoom element-pseudo" (click)="sendProductImageClickTracking()"
                        style="transform-origin: 0% 0%;">
                        <img *ngIf="!isProductCrouselLoaded && productAllImages && productAllImages.length > 0"
                            enhanceImgByNetwork src="{{productAllImages[0]['large'] }}" height="330" width="330"
                            alt="{{productName}}">
                        <img *ngIf="isProductCrouselLoaded" src="{{imagePathAsset}}assets/img/loader_new.gif"
                            class="loader-image" />
                    </div>
                </div>
                <ul class="pager">
                    <ng-container
                        *ngIf="!isProductCrouselLoaded && !productCrouselInstance && iOptions?.pager && productAllImages?.length>1">
                        <ng-container *ngFor="let item of productAllImages;let i=index">
                            <li *ngIf="item['contentType'] == 'IMAGE'" class="pager_dot" (click)="loadProductCrousel(i)"
                                [ngClass]="{'active': ( i==0 && !isProductCrouselLoaded ) || ( i==1 && isProductCrouselLoaded) }">
                            </li>
                            <li *ngIf="item['contentType'] == 'YOUTUBE_VIDEO'" (click)="loadProductCrousel(i)"
                                class="pager_icon_dot">
                                <em class="icon-youtube"></em>
                            </li>
                        </ng-container>
                    </ng-container>
                </ul>
            </div>
        </div>

        <!-- TODO: check how this section is used in PQA -->
        <ng-container *ngIf="productTags != undefined">
            <div class="image_tag">
                <div class="tag_container"
                    *ngFor="let tag of productTags | arrayFilterPipe : 'type': 'image': 'object' | slice:0:1;let i = index;">
                    <img src="{{tag.imageUrl}}">
                </div>
            </div>
        </ng-container>
    </div>

    <div class="prod-description">
        <h1 class="prod-name heading" *ngIf="productName">{{productName}}</h1>
        <ng-container *ngIf="productTags && productTags != undefined && refinedProdTags.length > 0">
            <div class="prod-tag">
                <div class="tag_container" *ngFor="let tag of refinedProdTags;let i = index;">
                    <img src="{{tag.imageUrl}}">
                </div>
            </div>
        </ng-container>
        <div class="pdp-price-qty-block">
            <div class="price-block" *ngIf="productMrp > 0">
                <ng-container *ngIf="productMrp > 0">
                    <p class="mrp" *ngIf="productMrp > priceWithoutTax">
                        <small>{{productMrp | currency: 'INR' : 'symbol' : '1.0-0'}}</small>
                        <span
                            *ngIf="productDiscount != undefined && productDiscount>0 && productMrp > 0 && bulkPriceWithoutTax==null">
                            {{((productMrp - priceWithoutTax)/productMrp)*100 | mathFloor | number:'1.0-0'}}% OFF
                        </span>
                        <span
                            *ngIf="productDiscount != undefined && productDiscount>0 && productMrp > 0 && bulkPriceWithoutTax!=null">
                            {{ bulkDiscount | mathFloor | number:'1.0-0'}}% OFF
                        </span>
                    </p>
                    <p class="actual-price" *ngIf="priceWithoutTax > 0 && bulkPriceWithoutTax==null">
                        {{priceWithoutTax | currency: 'INR' : 'symbol' : '1.0-0'}}
                        <small *ngIf="taxPercentage">
                            GST @{{taxPercentage}}% Inc. Price: {{productPrice | mathFloor | currency: 'INR' :
                            'symbol' : '1.0-0'}}
                        </small>
                    </p>
                    <p class="actual-price" *ngIf="bulkPriceWithoutTax!==null">
                        {{bulkPriceWithoutTax | currency: 'INR' : 'symbol' : '1.0-0'}}
                        <small *ngIf="taxPercentage">
                            GST @{{taxPercentage}}% Inc. Price: {{bulkSellingPrice | mathFloor | currency: 'INR' :
                            'symbol' : '1.0-0'}}
                        </small>
                    </p>
                </ng-container>
            </div>
            <!-- <div class="price-block" *ngIf="productMinimmumQuantity > 1 && (productOutOfStock || !productMrp)">
                <p class="actual-price">
                    <small>
                        Min Order Qty :
                        <span>{{productMinimmumQuantity}} Pack</span>
                    </small>
                </p>
             </div> -->
            <div class="qty_section" *ngIf="!productOutOfStock && productMrp > 0">
                <div class="quantity-block">
                    <span class="add-qty qty-block" (click)="updateProductQunatity('DECREMENT')">&#8722;</span>
                    <input id="product_quantity" [formControl]="qunatityFormControl" [value]="productMinimmumQuantity"
                        (focusout)="onChangeCartQuanityValue()" type="text" min="1" maxlength="3" numbersOnly />
                    <span class="remove-qty qty-block" (click)="updateProductQunatity('INCREMENT')">&#43;</span>
                </div>
                <div class="quan-details" *ngIf="productMinimmumQuantity>1">
                    <p>Qty Per Pack :
                        <span>{{priceQuantityCountry['packageUnit']}}</span>
                    </p>
                    <p>Min Order Qty :
                        <span>{{productMinimmumQuantity}} Pack</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="prod-inner-desc" (click)="scrollToId('reviewSection')">
            <span class="rating-box" *ngIf="starsCount > 0">{{starsCount | number : '1.1-1'}}
                <i class="icon-rating-star"></i>
            </span>
            <div class="prod-status">
                <!-- <h4 class="status" *ngIf="!productOutOfStock && productMrp > 0">IN STOCK</h4> -->
                <p class="prod-status-right">
                    <small class="review" (click)="scrollToId('reviewSection')"
                        *ngIf="rawReviewsData?.reviewList?.length > 0"> {{rawReviewsData.reviewList.length}}
                        Reviews
                    </small>
                </p>
            </div>
        </div>

        <!--recently bought product section -->
        <div class="recent-bought-wrap" *ngIf="rawProductCountMessage">
            <i class="icon-trending"></i>
            <span class="inner-text">{{rawProductCountMessage}}</span>
        </div>
        <!-- Share section is loaded on demand  -->
        <ng-container #productShare></ng-container>
    </div>

    <!-- CTA Fixed position -->
    <div class="bottom-bar" [class.highIndex]="displayCardCta" *ngIf="!productOutOfStock">
        <button class="cart-btn ml-5 bold-txt f-14 f-left" (click)="showFBT()">
            <i class="icon-cart1"></i>
            <span>ADD TO CART</span>
        </button>
        <div class="buy-now f-right f-14">
            <button class="f-14" (click)="addToCart(true);">BUY NOW</button>
        </div>
    </div>

    <!-- CTA Fixed position -->

    <!-- Product bulk quantity section starts -->
    <div class="grouping_wrap_pdp" *ngIf="!isCommonProduct">
        <div *ngFor="let list of productFilterAttributesList" class="singlewrap">
            <p class="heading-3">{{list.name}}</p>
            <ul>
                <li *ngFor="let item of list.items;let i = index;"
                    (click)="!item.selected && item.active ? updateAttr(item.msn) : pseudoFnc();">
                    <a [ngClass]="{'selected': item.selected , 'inactive': !item.active}">{{item.value}}</a>
                </li>
            </ul>
        </div>
    </div>
    <!-- Product bulk quantity section ends -->

    <!-- Product quantity action section starts -->
    <div class="product-section-detail"
        *ngIf="priceQuantityCountry && !productOutOfStock && priceQuantityCountry['bulkPricesModified'] && priceQuantityCountry['bulkPricesModified'].length > 0">
        <div class="pdp-subdetail container" [class.no-pad]="productOutOfStock && isCommonProduct">
            <div class="bulk-qty">
                <div class="bul-qty-head">
                    <p class="heading-3">Buy More & Save More</p>
                </div>
                <div class="blk-contain">
                    <div [style.width.px]="(priceQuantityCountry['bulkPricesModified'].length * 135)"
                        class="inner-blk-contain clearfix">
                        <div *ngFor="let items of productBulkPrices; let last=last; let index = index;"
                            (click)="selectProductBulkPrice(items.minQty)" 
                            class="blk-block"
                            [ngClass]="{'selected': (cartQunatityForProduct >= items.minQty && cartQunatityForProduct <= items.maxQty)}">
                            <p class="qty">Qty
                                <span *ngIf="last!==true">{{items.minQty}} {{items.minQty!==items.maxQty ?
                                    -items.maxQty:'' }}</span>
                                <span *ngIf="last==true">{{items.minQty}}</span>
                            </p>
                            <p class="per-qty">
                                {{items.bulkSPWithoutTax | mathFloor | currency: 'INR' : 'symbol' : '1.0-0'}}
                                <span>/pc</span>
                            </p>
                            <p *ngIf="items.discount>0" class="qty-discount">
                                {{ items.discount | number:'1.0-2' }} %OFF</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Product quantity action section ends -->
    <div class="deals-block bg-white" observeVisibility [debounceTime]="300" (visible)="onVisibleOffer($event)">
        <ng-container #offerSection></ng-container>
    </div>
    <div observeVisibility [debounceTime]="100" (visible)="onVisiblePincodeSection($event)" *ngIf="!productOutOfStock">
        <ng-container #pincodeForm></ng-container>
    </div>

    <!-- other sections starts -->
    <div>
        <!-- RFQ section starts -->
        <div class="payments-block" *ngIf="!productOutOfStock && productMrp > 0">
            <ul class="deals-list">
                <li class="clearfix">
                    <!-- <i class="icon-combo ico_offer"></i> -->
                    <img class="ofr_img" height="25" width="25" src="{{imagePathAsset}}assets/img/rfq-header.svg">
                    <div class="ofr_txt">
                        <strong class="text-black">Interested to buy in bulk</strong>
                        <small>Get customized price</small>
                    </div>
                    <span class="ico-right getQuote" (click)="raiseRFQQuote();">GET QUOTE</span>
                </li>
            </ul>
        </div>
        <!--Product-RFQ starts-->
        <div class="payments-block" *ngIf="productOutOfStock">
            <div observeVisibility [debounceTime]="100" (visible)="onVisibleProductRFQ($event)">
                <ng-container #productRFQ></ng-container>
            </div>
        </div>
        <!--Product-RFQ ends-->
        <!-- RFQ section ends -->
        <div class="moglix-benifits moglix-ben-n-ret-policy-Container clearfix" *ngIf="isProductReturnAble">
            <!-- start moglix benifits -->
            <h2 class="heading-3"> Moglix Benefits</h2>
            <div class="moglix-ben-n-ret-policy-InnerContainer">
                <div class="moglix-ben-n-ret-policy-Inner">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/gst-invo.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt benefits-txt">
                        GST Invoice<br> Available
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/secure-payment-fill.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt benefits-txt">
                        Secure <br> Payments
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/customer-service-fill.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt benefits-txt">
                        365 Days <br> Help Desk
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner">
                    <span class="returnImg">
                        <img src="assets/img/secure-payment-fill.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt benefits-txt">
                        Secure <br> Payments
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner">
                    <span class="returnImg">
                        <img src="assets/img/customer-service-fill.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt benefits-txt">
                        365 Days <br> Help Desk
                    </span>
                </div>
            </div>
            <h2 class="heading-3"> Return Policy</h2>
            <div class=" moglix-ben-n-ret-policy-InnerContainer pad-lr-0">
                <div class="moglix-ben-n-ret-policy-Inner" (click)="$event.stopPropagation(); navigateToFAQ();">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/restart-line.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt">
                        Upto 7 days <br /> returnable
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner" (click)="$event.stopPropagation();navigateToFAQ();">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/wrong-pro.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt">
                        Wrong <br /> Product
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner" (click)="$event.stopPropagation();navigateToFAQ();">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/restart-line-3.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt">
                        Damaged <br /> Product
                    </span>
                </div>
                <div class="moglix-ben-n-ret-policy-Inner" (click)="$event.stopPropagation();navigateToFAQ();">
                    <span class="returnImg">
                        <img src="{{imagePathAsset}}assets/img/thumb-down-button.svg" height="16px" width="16px">
                    </span>
                    <span class="returnTxt">
                        Defective <br />Product
                    </span>
                </div>
            </div>
        </div>
        <!-- <div class="payments-block">
            <ul class="deals-list">
                <li class="clearfix">
                    <span class="gst-icon">
                        <img src="{{imagePathAsset}}assets/img/poc/gst-invoice.svg" height="20" width="18">
                    </span>
                    <div class="coupon-txt">
                        <p>100% Original Products and Secure Payments</p>
                        <small>Get your Business GST Invoice</small>
                    </div>
                </li>
            </ul>
        </div> -->
        <div class="pdp-section-header">
            <h3 class="heading-3">
                About This Product
            </h3>
        </div>
        <div *ngIf="productKeyFeatures && productKeyFeatures.length > 0" class="key-features">
            <h2 class="heading-3">Key Features</h2>
            <ul class="feature-list">
                <li *ngFor="let feature of productKeyFeatures | sliceArray:3">
                    <p>
                        <span>{{feature}}.</span>
                    </p>
                </li>
            </ul>
            <div (click)="handleProductInfoPopup('key features', 'show all specifications')" class="show-all-strip">
                <span>Show All Key Features</span>
            </div>
        </div>

        <div class="product-specification" *ngIf=" productAttributes != null">
            <h2 class="heading-3">Product Specifications</h2>
            <table width="100%" class="product-spec" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="left">
                        <div>Brand</div>
                    </td>
                    <td class="right">
                        <div>
                            <a class="brandName"
                                (click)="commonService.navigateTo(getBrandLink(productBrandDetails))">{{productBrandDetails['brandName']}}</a>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let attr of productAttributes | objectToArray:'associative' | sliceArray:3s">
                    <td class="left">
                        <div>{{attr.key}}</div>
                    </td>
                    <td class="right">
                        <div *ngFor="let item of attr.value">
                            {{item}}
                        </div>
                    </td>
                </tr>
            </table>
            <div (click)="handleProductInfoPopup('specifications', 'show all specifications')"
                class="show-all-strip spec">
                <span>Show All Specifications</span>
            </div>
        </div>

        <div class="prod-detail">
            <h2 class="heading-3">Product Details</h2>
            <ng-container *ngIf="this.productDescripton != undefined else noProdDesc">
                <p [innerHTML]="this.productDescripton"></p>
                <p class="static-desc"> Browse through the extensive list of
                    <a class="blueText"
                        (click)="navigateLink('/'+ (productCategoryDetails ? productCategoryDetails['categoryLink'] : ''))">
                        {{productCategoryDetails['categoryName']}}</a> at Moglix. Shop online for other
                    <a class="blueText" (click)="navigateLink('/'+ productBrandCategoryUrl)">{{productBrandDetails ?
                        productBrandDetails['brandName'] : ''}}
                        {{productCategoryDetails['categoryName']}}.</a> available at Moglix in the lowest price range.
                </p>
            </ng-container>
            <ng-template #noProdDesc>
                <p>
                    {{productName}} is a premium quality product from {{productBrandDetails ?
                    productBrandDetails['brandName'] : ''}}. Moglix is a
                    well-known ecommerce platform for qualitative range of <a class="blueText"
                        (click)="navigateLink('/'+productCategoryDetails['categoryLink'])">{{productCategoryDetails ?
                        productCategoryDetails['categoryName'] : ''}}</a>.
                    All {{productName}} are manufactured by using quality assured material and advanced techniques,
                    which make them up to the standard in this highly challenging field. The materials utilized to
                    manufacture {{productName}}, are sourced
                    from the most reliable and official vendors, chosen after performing detailed market surveys.
                    {{productBrandDetails ? productBrandDetails['brandName'] : ''}} products are widely acknowledged in
                    the market for their high
                    quality. We are dedicatedly involved in
                    providing an excellent quality array of <a class="blueText"
                        (click)="navigateLink('/'+productBrandCategoryUrl)">
                        {{productBrandDetails ? productBrandDetails['brandName'] : ''}}
                        {{productCategoryDetails ? productCategoryDetails['categoryName'] : ''}}</a>.
                </p>
            </ng-template>
            <div (click)="handleProductInfoPopup('product details', 'read more')" class="show-all-strip">
                <span>Read More</span>
            </div>
        </div>



        <div *ngIf="productVideos && productVideos.length > 0" class="prod-detail detail-videos">
            <h2 class="heading-3">Product Videos</h2>
            <div [style.width]="productVideos.length * 252">
                <div class="prod-desc-video-container clearfix">
                    <div *ngFor="let video of productVideos" class="prod-desc-video">
                        <input class="youtube_icon" (click)="$event.stopPropagation();showYTVideo(video['link'])"
                            type="image" src="{{imagePathAsset}}assets/img/youtube_icon.svg"
                            border="border of the image" alt="text">
                        <img [src]="video['link'] | ytthumbnail:'hqdefault'">
                    </div>
                </div>
            </div>
        </div>

        <section class="card" [ngClass]="{'fbtSection': fbtComponentInstance}" observeVisibility [debounceTime]="100"
            (visible)="getFbtIntance($event)">
            <ng-container #fbt></ng-container>
        </section>

        <section *ngIf="productDocumentInfo && productDocumentInfo.length > 0" class="pdf_section">
            <h3>Product Specification Document</h3>
            <div class="pdf_list">
                <ng-container *ngFor="let pdf of productDocumentInfo">
                    <a target="_blank" class="pdf_anchr" href="{{DOCUMENT_URL + pdf.path}}">
                        <div class="pdf_link clearfix">
                            <span class="pdf-img">
                                <img src="{{imagePathAsset}}assets/img/download.svg">
                            </span>
                            <div class="pdf-text">
                                <h4>{{pdf.name}}</h4>
                                <span>DOWNLOAD NOW</span>
                            </div>
                        </div>
                    </a>
                </ng-container>
            </div>
        </section>

        <section id="similarProducts" observeVisibility [debounceTime]="100" (visible)="onVisibleSimilar($event)">
            <ng-container #similarProduct></ng-container>
        </section>
        <!--widgets section-->
        <section class="widget-container" *ngIf="productCategoryDetails">
            <a (click)="sendWidgetTracking('category'); commonService.setSectionClickInformation('pdp_widget', 'listing'); commonService.navigateTo('/'+productCategoryDetails['categoryLink'], true)"
                class="widget-items">
                <span class="content-wrap">
                    <p>More from {{productCategoryDetails['categoryName']}}</p>
                    <span class="explore-now">Explore Now</span>
                </span>
                <img src="{{imagePathAsset}}assets/img/arrow-right.svg" class="arrowRightImg" height="24" width="24">
            </a>

            <a (click)="sendWidgetTracking('brand + category'); commonService.setSectionClickInformation('pdp_widget', 'listing'); commonService.navigateTo('/'+productBrandCategoryUrl, true)"
                class="widget-items">
                <span class="content-wrap">
                    <p>More from {{productBrandDetails ? productBrandDetails['brandName'] : ''}}
                        {{productCategoryDetails ? productCategoryDetails['categoryName'] : ''}}</p>
                    <span class="explore-now">Explore Now</span>
                </span>
                <!-- <span>From ₹999</span> -->
                <img src="{{imagePathAsset}}assets/img/arrow-right.svg" class="arrowRightImg" height="24" width="24">
            </a>
        </section>
        <section id="sponseredProducts" observeVisibility [debounceTime]="100" (visible)="onVisibleSponsered($event)">
            <ng-container #sponseredProducts></ng-container>
        </section>

        <section class="pdp-section-card" id="reviewSection">
            <div class="pwa-row">
                <div class="pwa-col-6">
                    <p class="heading-3">Reviews & Ratings</p>
                </div>
                <div class="pwa-col-6 align-right" *ngIf="overallRating > 0">
                    <button class="btn redBgButton" (click)="writeReview()">WRITE A REVIEW</button>
                </div>
            </div>

            <div class="pwa-row" *ngIf="overallRating < 1">
                <p class="review_text">
                    Be the first one to provide review for this product
                </p>
                <button [style.width.%]="100" class="btn redBgButton" (click)="writeReview()">WRITE A REVIEW</button>
            </div>
            <div class="pwa-row" *ngIf="overallRating > 0">
                <p class="extra-small-txt">
                    Customer Reviews on {{ productName}}
                </p>
            </div>
            <div class="pwa-row rating-sec" *ngIf="overallRating > 0">
                <div class="pwa-col-6">
                    <div class="overall-rating">
                        <h3>{{ overallRating | number:'1.1-1' }}<i class="icon-rating-star"></i>
                        </h3>
                        <p class="small-txt">Average Rating based on {{ rawReviewsData?.summaryData?.final_rating }}
                            ratings and {{ rawReviewsData?.summaryData?.review_count }} reviews</p>
                    </div>
                </div>
                <div class="pwa-col-6">
                    <div class="rating-scale">
                        <div class="inner-scale">
                            <span>5</span>
                            <span class="rating-bar">
                                <span class="bar"
                                    [style.width.%]="(rawReviewsData?.summaryData?.five_star_count/rawReviewsData?.summaryData?.review_count)*100"
                                    class="bar dark-green"></span>
                            </span>
                        </div>
                        <div class="inner-scale">
                            <span>4</span>
                            <span class="rating-bar">
                                <span class="bar"
                                    [style.width.%]="(rawReviewsData?.summaryData?.four_star_count/rawReviewsData?.summaryData?.review_count)*100"
                                    class="bar light-green"></span>
                            </span>
                        </div>
                        <div class="inner-scale">
                            <span>3</span>
                            <span class="rating-bar">
                                <span class="bar"
                                    [style.width.%]="(rawReviewsData?.summaryData?.three_star_count/rawReviewsData?.summaryData?.review_count)*100"
                                    class="bar yellow"></span>
                            </span>
                        </div>
                        <div class="inner-scale">
                            <span>2</span>
                            <span class="rating-bar">
                                <span class="bar"
                                    [style.width.%]="(rawReviewsData?.summaryData?.two_star_count/rawReviewsData?.summaryData?.review_count)*100"
                                    class="bar light-red"></span>
                            </span>
                        </div>
                        <div class="inner-scale">
                            <span>1</span>
                            <span class="rating-bar">
                                <span class="bar"
                                    [style.width.%]="(rawReviewsData?.summaryData?.one_star_count/rawReviewsData?.summaryData?.review_count)*100"
                                    class="bar red"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngFor="let review of rawReviewsData?.reviewList | slice:0:2;let i=index" class="reviewRow">
                <div class="pwa-row innerRow">
                    <div class="pwa-col-6 reviewRow-col">
                        <div class="small-stars">
                            <i class="icon-rating-star" [class.ylw-txt]="review?.rating >= 0"></i>
                            <i class="icon-rating-star" [class.ylw-txt]="review?.rating >= 1"></i>
                            <i class="icon-rating-star" [class.ylw-txt]="review?.rating >= 2"></i>
                            <i class="icon-rating-star" [class.ylw-txt]="review?.rating >= 3"></i>
                            <i class="icon-rating-star" [class.ylw-txt]="review?.rating >= 4"></i>
                        </div>
                        <p>{{review?.user_name}}</p>
                        <p class="small-txt grey-txt cust-date">
                            {{ review?.date_unix | date: 'longDate' }}
                        </p>
                    </div>
                    <div class="pwa-col-6 align-right">
                        <p class="small-txt green-txt" *ngIf="review?.is_approved">Verified Purchase</p>
                    </div>
                    <div>
                        <h3 class="heading-3-txt">
                            {{ review?.review_subject }}
                        </h3>
                        <p class="content">
                            {{ review?.review_text }}
                        </p>
                    </div>
                </div>
                <div class="pwa-row like-unlikeRow">
                    <div class="pwa-col-6">
                        <!-- <strong>Report Abuse</strong> -->
                    </div>
                    <div class="pwa-col-6 align-right">
                        <button class="suggstn-btn" [ngClass]="{'active':review.like == '1'}"
                            (click)="$event.stopPropagation();postHelpful(review,'1','0',i)">
                            <span class="small-txt">{{review.yes}}</span>
                            <i class="icon-like"></i>
                        </button>
                        <button class="suggstn-btn" [ngClass]="{'active':review.dislike=='1'}"
                            (click)="$event.stopPropagation();postHelpful(review,'0','1',i)">
                            <span class="small-txt">{{review.no}}</span>
                            <i class="icon-dislike"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div *ngIf="rawReviewsData?.reviewList?.length > 2" class="view-review"
                (click)="$event.stopPropagation();handleReviewRatingPopup()">
                <span>VIEW {{ reviewLength - 2 }} MORE HELPFUL REVIEW</span>
            </div>
        </section>
        <section class="Qa" *ngIf="questionAnswerList">
            <div class="">
                <p class="heading-3">Questions & Answers</p>
                <form class="promo-code clearfix" [formGroup]="questionAnswerForm">
                    <input class="faq" formControlName="question" id="inlineFormInputGroup" type="text"
                        placeholder="Have a Question?">
                    <button [disabled]="questionAnswerForm.invalid" (click)="postUserQuestion()">SUBMIT</button>
                </form>
                <!-- search space  -->
                <p class="display-qn"
                    *ngIf="questionAnswerList && questionAnswerList['data'] && questionAnswerList['data']['totalCount'] > 0">
                    Displaying Questions
                    <span>1-{{questionAnswerList['data']['totalCount']}}</span> of
                    <span>{{questionAnswerList['data']['totalCount']}} </span>
                </p>
                <ng-container
                    *ngIf="questionAnswerList && questionAnswerList['data'] && questionAnswerList['data']['totalCount'] != 0">
                    <div class="qn-block" *ngFor="let item of questionAnswerList['data']['qlist'];let i=index">
                        <div class="question clearfix">
                            <span class="qn-number">Q{{i+1}}.</span>
                            <p class="qn-txt">{{item.questionText}}</p>
                        </div>
                        <div class="answers">
                            <div class="answer-block">
                                <p class="answer">{{item.answerText}}</p>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </section>
        <section observeVisibility [debounceTime]="100" (visible)="onVisibleProductAccordians($event)">
            <ng-container #pdpAccordian></ng-container>
        </section>
        <past-orders *ngIf="isBrowser" [outOfStock]="productOutOfStock" [analytics]="pastOrderAnalytics"></past-orders>
        <div [ngClass]="{'returnPolicyContainer': true}" observeVisibility [debounceTime]="300"
            (visible)="onVisibleAppPromo($event)">
            <ng-container #appPromo></ng-container>
        </div>
        <section observeVisibility style="margin-top: 10px;" [debounceTime]="100"
            [ngClass]="{'recent_section': !recentProductsInstance}" (visible)="onVisibleRecentProduct($event)">
            <ng-container #recentProducts></ng-container>
            <div class="loader_container" *ngIf="!recentProductsInstance">
                <div class="loader"></div>
            </div>
        </section>

        <ng-container *ngIf="breadcrumbData && breadcrumbData.length > 0">
            <breadcrumb-nav [breadcrumb]="breadcrumbData" [analytics]="breadCrumbAnalytics"></breadcrumb-nav>
        </ng-container>
        <section id="similarProductsOos" observeVisibility [debounceTime]="100" (visible)="onVisibleSimilarOOS($event)">
            <ng-container #similarProductOOS></ng-container>
        </section>
    </div>
    <!-- other sections ends -->

    <ng-container *ngIf="!productOutOfStock" #productRFQ></ng-container>
    <ng-container #rfqForm></ng-container>
    <ng-container #offerPopup></ng-container>
    <ng-container #offerComparePopup></ng-container>
    <ng-container #writeReviewPopup></ng-container>
    <ng-container #alertBox></ng-container>
    <ng-container #globalToast></ng-container>
    <ng-container #emiPlansPopup></ng-container>
    <ng-container #reviewRatingPopup></ng-container>
    <ng-container #questionAnswersPopup></ng-container>
    <ng-container #productInfoPopup></ng-container>
</div>

<ng-container #addToCartToast></ng-container>
<ng-container #popupCrousel></ng-container>

<div *ngIf="this.isBrowser && isRFQSuccessfull" class=" alert-box ">
    <div class="overlay "></div>
    <div class="content-area bottom-layout ">
        <div class="rfq-thanks-popup ">
            <i class="del-ico icon-circle-delete " (click)="$event.stopPropagation();closeRFQAlert()"></i>
            <img src="{{imagePathAsset}}assets/img/checkbox-circle-fill-m.png ">
            <h3 class="heading-2">Thanks for submitting the query.</h3>
            <div class="rfq-support-txt">
                <p class="grey-txt">
                    Our support member will get in touch with you
                    <br />
                    within 24 hours
                </p>
                <p class="rfq-thanks-txt mar-t-10">
                    For further assistance
                    <span>Call or Whatsapp</span>
                    @<strong>&nbsp;+91 99996 44044</strong>
                </p>
                <p class="rfq-thanks-txt">
                    <span>You can also mail us at</span>
                    <strong>salesenquiry@moglix.com</strong>
                </p>
            </div>
            <div class="alert-btn-row">
                <button *ngIf="similarProducts.length>0"
                    (click)="scrollToResults(!productOutOfStock ? '#similarProducts' : '#similarProductsOos') "
                    class="btn btn-red">SHOW SIMILAR PRODUCTS</button>
                <p class="orange-txt mt-5" (click)="$event.stopPropagation();navigateToCategory();closeRFQAlert()">
                    EXPLORE CATEGORY</p>
            </div>
        </div>
    </div>
</div>

<section *ngIf="productNotFound" class="page-not-found">
    <img src="{{imagePath + '1/img/Truck.png'}}" class=" wp-100">
    <div class="container align-center">
        <h3 class="f-16">Oops!!! Page not Delivered!!</h3>
        <p class="mb-15 pb-10 f-14">We apologize! The page could not be delivered as the address does not exist on this
            planet.
        </p>
        <ul class="categories-list">
            <li (click)="commonService.navigateTo('/electricals/211000000')">
                <i class="icon-electricals"></i>
                <span>Electricals</span>
            </li>
            <li (click)="commonService.navigateTo('/hand-tools/112000000')">
                <i class="icon-hand-tool"></i>
                <span>Hand Tools</span>
            </li>
            <li (click)="commonService.navigateTo('/safety-and-security/116000000')">
                <i class="icon-safety"></i>
                <span>Safety</span>
            </li>
            <li (click)="commonService.navigateTo('/security/120000000')">
                <i class="icon-security"></i>
                <span>Security</span>
            </li>
            <li (click)="commonService.navigateTo('/power-tools/114000000')">
                <i class="icon-power-tool"></i>
                <span>Power Tools</span>
            </li>
            <li (click)="commonService.navigateTo('/all-categories')">
                <i class="icon-all-category"></i>
                <span>more</span>
            </li>
        </ul>
    </div>
</section>

<div id="pageBottom"></div>
<whatsapp-toast [customText]="getWhatsText"></whatsapp-toast>