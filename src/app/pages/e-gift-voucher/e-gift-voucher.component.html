<div class="e-gifting">
    <div class="e-gifting-banner">
        <h1>Get Best Discounts from us on Buying Bulk E-Gift Cards for your Team, Business partners, Dealers, Family.
        </h1>
        <h3>200+ Brands to choose from!</h3>
    </div>
    <div class="gifting-form-container">
        <h2>Fill your E-gift card requirements and we will call you with the <span>best discounts</span> within 30 min.
        </h2>
        <div class="centered-btn">
            <h5 (click)="togglePopUp2()">Check list of 200+ brands e-Gift<br> vouchers & validity</h5>
        </div>
        <form [formGroup]="eGiftForm">
            <div class="personal-details" formGroupName="rfqEnquiryCustomer">
                <div class="row">
                    <div class="form-pd-field">
                        <label>Full Name*</label>
                        <input type="text" (keypress)="checkForspecialChars($event)" formControlName="name"
                            placeholder="Enter full name">
                        <p *ngIf="name.touched && name.hasError('required')" class="">Kindly enter your name
                            <span class="">(Special characters are not allowed)</span>
                        </p>
                    </div>
                    <div class="form-pd-field">
                        <label>Email ID*</label>
                        <input type="text" formControlName="email" placeholder="Enter email Id">
                        <p *ngIf="email.touched && email.hasError('required')" class="">Kindly enter valid email ID</p>
                        <p *ngIf="!email.hasError('required') && email.hasError('invalidCharT')" class="">Kindly enter
                            valid email ID. Ex: abc@xxx.com
                        </p>
                    </div>
                    <div class="form-pd-field">
                        <label>Mobile No*</label>
                        <input type="text" (keypress)="checkNumberic($event)" maxlength="10" minlength="10"
                            formControlName="mobile" placeholder="Enter mobile no">
                        <p *ngIf="mobile.touched && mobile.hasError('required')" class="">Kindly enter your phone no.
                        </p>
                        <div *ngIf="!mobile.hasError('required') && mobile.hasError('minlength')" class="">Kindly enter
                            10 digit contact no.</div>
                    </div>
                    <div class="form-pd-field">
                        <label>Company (Optional)</label>
                        <input (keypress)="checkForspecialChars($event)" type="text" formControlName="company"
                            placeholder="Enter company name">
                    </div>
                </div>
            </div>
            <div class="gift-card-req" formArrayName="rfqEnquiryItemsList">
                <h3>Enter your gift card requirement:</h3>
                <div class="gift-card-req-form">
                    <ng-container *ngFor="let requirement of rfqEnquiryItemsList['controls'];let rIndex=index">
                        <div class="req-flex" [class.valid-row]="requirement.valid" [formGroup]="requirement" *ngIf="brandList.length">
                            <div class="brand req-flex-child">
                                <list-autocomplete [placeholder]="'Brand'" [list]="brandList"
                                    [control]="requirement.get('brandName')"
                                    (onSelect)="updateBrand(requirement.get('brandName'), $event)"></list-autocomplete>
                                <p *ngIf="requirement.get('brandName').touched && requirement.get('brandName').invalid"
                                    class="error-txt">
                                    Kindly enter brand.
                                </p>
                            </div>
                            <div class="multiple-form-field">
                                <div class="value req-flex-child">
                                    <select (change)="updateItemTotalValue(requirement)" formControlName="itemValue">
                                        <option value="" selected disabled hidden>Value (INR)</option>
                                        <option *ngFor="let value of PRICE_VALUES" [ngValue]="value">{{value}}</option>
                                    </select>
                                    <i class="icon-down"></i>
                                    <p *ngIf="requirement.get('itemValue').touched && requirement.get('itemValue').invalid"
                                        class="error-txt">
                                        Kindly select value.
                                    </p>
                                </div>
                                <div class="qty req-flex-child">
                                    <input (change)="updateItemTotalValue(requirement)" type="number"
                                        placeholder="Enter Qty" formControlName="quantity"
                                        (keypress)="checkNumberic($event)">
                                    <p *ngIf="requirement.get('quantity').touched && requirement.get('quantity').invalid"
                                        class="error-txt">
                                        Kindly enter quantity.
                                    </p>
                                </div>
                            </div>
                            <div class="total-value req-flex-child">
                                <input type="text" formControlName="totalValue" readonly
                                    placeholder="Total value (INR)">
                            </div>
                            <div class="action req-flex-child" (click)="removeProduct(rIndex);"
                                *ngIf="rfqEnquiryItemsList.length > 1">
                                <div class="bin-area">
                                    <img src="assets/img/gift-bin-icon.png">
                                </div>
                            </div>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div [ngClass]="{ 'add-another-card-disabled': eGiftForm.invalid, 'add-another-card': eGiftForm.valid }">
                <input type="button" [disabled]="eGiftForm.invalid" (click)="addRequirementForm()"
                    value="+ ADD ANOTHER CARD">
            </div>
            <div class="row submit-and-total">
                <div class="col-md-4 total-area">
                    <span class="total">Total</span><br>
                    <span class="amount">â‚¹ {{totalValue | mathFloor | indianCurrency}} INR</span>
                </div>
                <div class="col-md-8 submit-area">
                    <input class="submit-button" type="button" value="SUBMIT REQUEST" (click)="saveGift()">
                </div>
            </div>
        </form>
    </div>
</div>

<!-- category+brand+validity popup -->
<app-bottom-menu>
    <div content *ngIf="showListPopup">
        <div class="list-of-brand-e-gifts">
            <div class="top-head">
                <div class="th-left">
                    <h2>List of 200+ brands e-Gift vouchers & validity</h2>
                </div>
                <div class="th-right" (click)="togglePopUp2()">
                    <img src="assets/img/close-circle-fill.svg">
                </div>
            </div>
            <div class="table-area">
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Brands</th>
                            <th>Validity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container *ngFor="let category of categoryList">
                            <tr *ngFor="let brands of categoryBrandInfo[category]">
                                <td>{{category}}</td>
                                <td>{{brands.brandName}}</td>
                                <td>{{brands.validity}}</td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</app-bottom-menu>


<!-- success popup -->
<app-bottom-menu>
    <div content *ngIf="showSuccessPopup">
        <div class="thanks-pop">
            <div class="top-cross-area" (click)="togglePopUp1()">
                <img src="assets/img/close-circle-fill.svg">
            </div>
            <div class="pop-img-area">
                <img src="assets/img/checkbox-circle-fill-m.svg">
            </div>
            <div class="pop-text-area">
                <h5>Thanks for submitting the query, we will call you with the best discounts within 30 min.</h5>
            </div>
            <div class="pop-rnr" (click)="togglePopUp1()">
                <button>RAISE NEW REQUEST</button>
            </div>
        </div>
    </div>
</app-bottom-menu>
