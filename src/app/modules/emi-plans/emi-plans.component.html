<app-pop-up (outData$)="outData($event)" [class.open1]="openEMIPopup"
    [data]="{class: 'payment-popup addAddressPopup addEmi',headerCustom:true, selector:'openEMIPopup'}">
    <div class="head-sec header_add_edit" header>
        <div>
            <i class="icon-back f-left white_text" (click)="closeEMIPalns($event)"></i>
            <p class="txt header_text page-name">EMI Plans</p>
        </div>
    </div>
    <div class="content-popup mt-15" content>
        <!--10766:Design Changes start-->
        <!--cards tab code start-->
        <div class="emi-top-details pd-15">
            <div class="emi-top-details-inner intrst-plan">
                <span class="bullet">&#8226;</span>
                <p><span class="green-txt">0% interest plans</span> available on listed debit/credit cards.</p>
            </div>
            <div class="emi-top-details-inner how-it-work">
                <div class="emi-top-details-inner-left">
                    <img src="assets/img/how-it-w.png">
                </div>
                
                <div  (click)="handleEMIStepsPopup()" class="emi-top-details-inner-mid">
                    <p><strong>See how it works</strong></p>
                    <span>You can avail it in 4 simple steps</span>
                     
                </div>
                <div class="emi-top-details-inner-last">
                    <img src="assets/img/arrow-right-blue.png">
                </div>
                
            </div>
            <div class="find-txt mt-15">
                <p><strong>Find a suitable EMI option below and choose the same option at payments step while placing the order.</strong></p>
            </div>
        </div>
        <div class="emiTabs">
            <div class="emiTab" [class.selectedTab]="paymentMethod == CARD_TYPES.creditCard"
                (click)="changeCardType(CARD_TYPES.creditCard)">
                <span>Credit Card</span>
            </div>
            <div class="emiTab" [class.selectedTab]="paymentMethod == CARD_TYPES.debitCard"
                (click)="changeCardType(CARD_TYPES.debitCard)">
                <span>Debit Card</span>
            </div>
        </div>
        <!--cards tab code end-->
            <div *ngFor="let item of dataEmi" class="payment-dropdown-listItem" >
                <div (click)="selectedBankChange(item)" class="payment-accordion_header">
                    <img class="ico-accord-left" src="assets/img/emi-bajaj.png"/>
                    <span>{{item['bankname']}}</span>
                    <i  class="icon-down"></i>
                </div>
                <div class="payment-accordion_body">
                <div [style.display]="item['key']===selectedBank?'block':'none'">
                    <div class="emi-plans"
                        *ngIf="noCostEmiCount[selectedBank] && noCostEmiCount[selectedBank]['noCost'] > 0">
                        <h3 class="heading medium-heading">No Cost EMI Plans</h3>
                        <div class="emi-plans-list">
                            <ng-container
                                *ngFor="let emi of emiResponse[selectedBank] | objectToArray:'associative'; index as i;">
                                <label *ngIf="emi.value.emi_interest_paid === 0" class="emi-plans-list-item">
                                    <div class="emi-amount">
                                        <p>₹{{emi.value.emi_value | mathCeil | number : '1.2-2'}}</p>
                                        <span>for {{getEmiMonths(emi.key) < 10 ? getEmiMonths(emi.key) :
                                                getEmiMonths(emi.key) }} months <span class="green-txt">@0%
                                                p.a.</span></span>
                                    </div>
                                    <span class="emi-total-payable">₹{{emi.value.transactionAmount | number :
                                        '1.2-2'}}</span>
                                </label>
                            </ng-container>
                        </div>
                    </div>
                    <div class="emi-plans"
                        *ngIf="noCostEmiCount[selectedBank] && noCostEmiCount[selectedBank]['withCost'] > 0">
                        <h3 class="heading medium-heading">Standered EMI Plans </h3>
                        <div class="emi-plans-list">
                            <ng-container *ngFor="let emi of emiResponse[selectedBank] | objectToArray:'associative'">
                                <label *ngIf="emi.value.emi_interest_paid !== 0" class="emi-plans-list-item">
                                    <div class="emi-amount">
                                        <p>₹{{emi.value.emi_value | mathCeil | number : '1.2-2'}}</p>
                                        <span>for {{getEmiMonths(emi.key) < 10 ? getEmiMonths(emi.key) :
                                                getEmiMonths(emi.key) }} months {{emi.value.emi_interest_paid> 0 ? +
                                                emi.value.emiBankInterest + '%' :
                                                '0 %' }} p.a.</span>
                                    </div>
                                    <span class="emi-total-payable">₹{{emi.value.transactionAmount | number :
                                        '1.2-2'}}</span>
                                </label>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-container #emiStepsPopup></ng-container>
    </div>
</app-pop-up>