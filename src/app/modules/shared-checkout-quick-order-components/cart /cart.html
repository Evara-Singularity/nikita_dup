<div *ngIf="_cartService.getGenericCartSession?.itemsList && _cartService.getGenericCartSession?.itemsList.length > 0">

    <div class="pwa-row applycoupen-strip">
        <div class="pwa-col-12 applycoupon-section">
             <div class="left-coupon-block">
                <i class="icon-coupon-3-fill-1 green-txt"></i>
                <span class="apply-coupen-txt">APPLY COUPON</span>
            </div>
            <i class="icon-next"></i>
        </div>
    </div>
    <div class="pwa-row">
        <div class="pwa-col-12">
            <p class="items-in-your-cart">1 items in your cart</p>
        </div>
    </div>
    <!-- <div class="thanks-pop">
        <div class="top-cross-area">
            <img src="assets/img/close-circle-fill.svg">
        </div>
        <div class="pop-img-area">
            <img src="assets/img/checkbox-circle-fill-m.svg">
        </div>
        <div class="pop-text-area">
            <h3>Thanks for submitting the query</h3><br>
            <h4>Our support member will get in touch with you within 24 hours.</h4>
        </div><br>
        <div class="mail-n-call-area">
            <h4>For further assistance Call or Whatsapp @<span class="mail-or-num">+91 - 9999644044</span></h4><br>
            <h4>You can also mail us at <span class="mail-or-num">salesenquiry@moglix.com</span>.</h4>
        </div>
        <div class="pop-rnr" >
            <button class="btn redBgButton">EXPLORE AVAILABLE PRODUCTS</button>
        </div>
    </div> -->

    <div [ngClass]="{'realTimeUpdate':item['text1']}" class="card relative"
        *ngFor="let item of _cartService.getGenericCartSession?.itemsList; let i = index;">
        <div *ngIf="item['text1']" class="realTimePrice">
            <span>{{item['text1']}}
                <strong>{{item['oPrice'] | currency:'INR' : 'symbol' : '1.2-2'}} </strong> to <strong>
                    {{item['nPrice'] | currency:'INR' : 'symbol' : '1.2-2'}}</strong></span>
        </div>
        <div class="pwa-row pad-0" [ngClass]="{'oos':item.oos}">
            <div class="product-left">
                <div class="product-img product-img-v2">
                    <img (click)="redirectToProductURL(item.productUrl)" src="{{item.productImg}}">
                </div>

            </div>
            <div class="product-detail">
                <div class="p-name">
                    <a (click)="redirectToProductURL(item.productUrl)"> {{ (item.productName.length > 50) ?
                        (item.productName | slice:0:48) + '..' : (item.productName) }}</a>
                </div>
                <!-- <p class="seller">
                    Brand: {{item.brandName}}
                </p> -->
                <p class="price clearfix">
                    <span class="before-discount gray-txt">MRP ₹1,999 <span class="green-txt">(12% OFF) </span></span>
                    <span class="after-disc" *ngIf="item.priceWithoutTax > 0 && item.bulkPrice==null">₹
                        {{item.priceWithoutTax | mathFloor | number : '1.2-2'}}</span>
                    <span class="after-discount" *ngIf="item.bulkPrice!==null">₹{{item.bulkPriceWithoutTax | mathFloor |
                        number : '1.2-2'}}</span>
                </p>
                <!-- <div *ngIf="!item.oos" class="remove-btn" (click)="removePopup = true; removeIndex = i">
                    <span>REMOVE</span>
                </div> -->
            </div>
        </div>
        <div *ngIf="item.oos" class="remove-btn remove-oos" (click)="removePopup = true; removeIndex = i">
            <span>REMOVE</span>
        </div>
        <!-- <div class="alert-box" *ngIf="removePopup">
            <div class="overlay"></div>
            <div class="content-area">
                <div class="info-area">
                    <p class="info-title">Remove Item</p>
                    <p class="info">Are you sure you want to remove this item?</p>
                </div>
                <div class="button-area">
                    <button (click)="removePopup = false" class="cancel">CANCEL</button>
                    <button (click)="deleteProduct($event)" class="continue">REMOVE</button>
                </div>
            </div>
        </div> -->
        <div [ngClass]="{'oos':item.oos}" class="price_detail_toggle pad-15">
            <div class="volume">
                <span class="f-left txt">Qty :&nbsp;</span>
                <span class="btn-volume" (click)="updateCartItemQuantity(quantityTarget.value, i, 'decrement')"><span
                        class="multiple-quantity">-</span><i class="icon-bin single-quantity"></i></span>
                <input numbersOnly type="text" maxlength="3" [value]="item.productQuantity"
                    (focusout)="updateCartItemQuantity(quantityTarget.value, i, 'update')" #quantityTarget>
                <span class="btn-volume" (click)="updateCartItemQuantity(quantityTarget.value, i, 'increment')">+</span>
            </div>
            <div class="price-label" [appKpToggle]="{idName:'showPrice'+(i+1),iconMode : true}">
                <div class="f-right">
                    <div class="f-left">
                        <h3 *ngIf="item.bulkPrice === null && !item.oos" class="price-val">{{item.priceWithoutTax *
                            item.productQuantity | mathFloor | currency:'INR' : 'symbol' : '1.2-2' }}</h3>
                        <h3 *ngIf="item.bulkPrice !== null && !item.oos" class="price-val">{{item.bulkPriceWithoutTax *
                            item.productQuantity | mathFloor | currency:'INR' : 'symbol' : '1.2-2' }}</h3>
                        <h3 *ngIf="item.oos" class="price-val">Not Available</h3>
                        <span class="grey-txt" *ngIf="item?.shippingCharges == 0 && !item?.oos">Price Details</span>
                        <span class="grey-txt" *ngIf="item?.shippingCharges > 0 && !item?.oos">Price + Shipping
                            Details</span>
                        <span id="natxt" class="grey-txt " *ngIf="item.oos">NA</span>
                    </div>
                    <i class="icon-down"></i>
                </div>
            </div>
        </div>
        <div [ngClass]="{'oos':item.oos}" class="price-breakup" [id]="'showPrice'+(i+1)" style="display: none">
            <ul class="txt-list">
                <li>
                    <span class="tag-label">Price</span>
                    <span class="tag-value">{{item.priceWithoutTax *
                        item.productQuantity | mathFloor | currency:'INR' : 'symbol' : '1.2-2' }}</span>
                </li>
                <li>
                    <span class="tag-label">{{item.taxPercentage}}% GST </span>
                    <span class="tag-value">₹{{ (item.tax | mathFloor | number : '1.2-2') || 0 }}</span>
                </li>
                <li>
                    <span class="tag-label">Shipping</span>
                    <span class="tag-value">₹{{ (item.shippingCharges | mathFloor | number : '1.2-2') || 0 }}</span>
                </li>
                <li>
                    <span class="tag-label">Coupon Discount</span>
                    <span class="tag-value green-txt">₹100</span>
                </li>
                <li class="bold-txt">
                    <span class="tag-label">Total</span>
                    <span class="tag-value">₹{{ (item.totalPayableAmount + item.shippingCharges - item.offer |
                        mathFloor |number : '1.2-2') || 0 }}</span>
                </li>
            </ul>
        </div>
        <div class="coupen-and-discount">
            <span>Coupon discount - ₹100</span>
            <span>Free Shipping<i class="icon-delivery_y_5"></i></span>
        </div>
    </div>
</div>

<app-bottom-menu *ngIf="removePopup">
    <div content>
        <div class="content-area">
            <div class="top-heading">
                <h3 class="heading-3">Are you sure to remove this item?</h3>
                <i (click)="removePopup = false" class="icon-circle-delete"></i>
            </div>
            <div [ngClass]="{'realTimeUpdate':item['text1']}" class="cart-popup-card card relative"
                *ngFor="let item of _cartService.getGenericCartSession?.itemsList; let i = index;">
                <div *ngIf="item['text1']" class="realTimePrice">
                    <span>{{item['text1']}}
                        <strong>{{item['oPrice'] | currency:'INR' : 'symbol' : '1.2-2'}} </strong> to <strong>
                            {{item['nPrice'] | currency:'INR' : 'symbol' : '1.2-2'}}</strong></span>
                </div>
                <div class="pwa-row pad-0" [ngClass]="{'oos':item.oos}">
                    <div class="product-left">
                        <div class="product-img product-img-v2">
                            <img (click)="redirectToProductURL(item.productUrl)" src="{{item.productImg}}">
                        </div>

                    </div>
                    <div class="product-detail">
                        <div class="p-name">
                            <a (click)="redirectToProductURL(item.productUrl)"> {{ (item.productName.length > 50) ?
                                (item.productName | slice:0:48) + '..' : (item.productName) }}</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="button-area">
                <button (click)="deleteProduct($event)" class="btn-remove redBgButton"><i
                        class="icon-bin single-quantity"></i>&nbsp;REMOVE</button>
                <button class="btn-wishlist btn btn-red-bg">MOVE TO WISHLIST</button>
            </div>
        </div>
    </div>
</app-bottom-menu>