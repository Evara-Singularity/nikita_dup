<div class="filter-btn-container">
    <button (click)="toggleSortBy()">Sort By <span>{{ _commonService.selectedFilterData['sortBy'] ? _commonService.selectedFilterData['sortBy'] : 'popularity' }}</span></button>
    <button (click)="filterUp()">Filters <span class="price-filter" *ngIf="appliedFilterCount > 0">{{ appliedFilterCount }}</span></button>
</div>

<div class="list-heading" [class.list-heading-search]="pageName === 'SEARCH'">
    <ng-container *ngIf="pageName === 'SEARCH'">
        <div class="list-heading-search">
            {{productsListingData.totalCount}} Products below
        </div>
    </ng-container>
    <ng-container *ngIf="pageName !== 'SEARCH'">
        <div>
            Safety
        </div>
        <div *ngIf="productsListingData.totalCount">
            Showing 20 out of {{productsListingData.totalCount}} products
        </div>
    </ng-container>
</div>

<ng-container *ngFor="let product of productsListingData.products; let i = index;">
    <filter-mid-plp [position]="i" [filterData]="productsListingData.filterData" *ngIf="i === 5 || i === 10 || i === 15"></filter-mid-plp>
    <product-horizontal-card [product]="product">
    </product-horizontal-card>
</ng-container>

<span observeVisibility [debounceTime]="100" (visible)="onVisiblePagination()"></span>
<ng-template #pagination></ng-template>

<ng-container #filter></ng-container>
<ng-container #sortBy></ng-container>