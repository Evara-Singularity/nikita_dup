<loader [showLoader]="showLoader"></loader>
<div class="cat_filter_wrap">
    <div class="prod_filter">
        <filter *ngIf="isBrowser" [bucketsUpdated]="bucketsUpdated" [pageName]="pageName"
            [sortByComponentUpdated]="sortByComponentUpdated" (filterSelected)="onFilterSelected($event)"></filter>
    </div>
</div>
<div class="products-container">
    <div>
        <div class="card">
            <div class="container">
                <div class="search-txt"
                    *ngIf="(didYouMean == undefined || didYouMean == '') && productSearchResult != undefined">
                    <p class="f-left"
                        *ngIf="productSearchResult.correctedSearchString != undefined && productSearchResult.correctedSearchString !== null">
                        <span class="">Showing results for
                            <i>{{productSearchResult.correctedSearchString}}</i></span><br />
                        <a class="blue-text"
                            (click)="redirectWithNoPreProcessRequiredParam(productSearchResult?.inputSearchString)">Search
                            instead for {{productSearchResult?.inputSearchString}}</a>
                    </p>

                    <p class="f-left"
                        *ngIf="(productSearchResult.correctedSearchString === undefined || productSearchResult.correctedSearchString === null) && productSearchResult.searchDisplayOperation == 'or'">
                        <span>
                            Showing {{productSearchResult.totalCount}} results for
                            "{{productSearchResult.displayString}}"
                        </span>
                    </p>
                    <p class="f-left"
                        *ngIf="(productSearchResult.correctedSearchString === undefined || productSearchResult.correctedSearchString === null) && productSearchResult.searchDisplayOperation != 'or'">
                        <span>Showing {{productSearchResult.totalCount}} results for
                            "{{(productSearchResult.displayString != undefined &&
                            productSearchResult.displayString != null) ?
                            productSearchResult.displayString :
                            productSearchResult?.inputSearchString}}"</span>
                    </p>
                </div>

                <div class="related-search" *ngIf="relatedSearches != null && relatedSearches.length">
                    <p class="f-left">
                        View Related searches:
                        <span *ngFor="let relatedSearch of relatedSearches; let i = index"><a [routerLink]="['/search']"
                                [queryParams]="getQueryParams({search_query: relatedSearch.term})"
                                [fragment]="getFragments()">{{relatedSearch.term}},
                            </a></span>
                    </p>
                </div>
            </div>
        </div>
        <div class="search-res">
            <product-list [productsUpdated]="productsUpdated"></product-list>
            <div class="filter-wrapper">
                <button type="button" (click)="filterUp()">
                    <i class="icon-filter" aria-hidden="true"></i>
                    <span class="txt">
                        FILTER
                        <span *ngIf="filterCounts && filterCounts>0">({{filterCounts}})</span></span>
                </button>

                <button type="button" (click)="sortByOpt = true">
                    <i class="icon-sort-by" aria-hidden="true"></i>
                    <span class="txt">SORT BY</span>
                </button>
            </div>
            <sort-by [sortByUpdated]="sortByUpdated" [class.open]="sortByOpt" (outData$)="onUpdaet($event)"></sort-by>
        </div>
        <div class="card mt-15" [ngClass]="{'hide': !productSearchResult || !productSearchResult['totalCount']}">
            <pagination class="block o-hidden h-auto-xs" [position]="'BOTTOM'" [paginationUpdated]="paginationUpdated"
                [sortByComponentUpdated]="sortByComponentUpdated" (onPageChange)="pageChanged($event)"></pagination>
        </div>
    </div>
</div>